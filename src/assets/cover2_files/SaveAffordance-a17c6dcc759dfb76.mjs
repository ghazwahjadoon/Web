(self.modernJsonp=self.modernJsonp||[]).push([["64701"],{358276:function(e,n,o){o.r(n),o.d(n,{default:()=>C});var a=o(281098),t=o(667294),i=o(581722),l=o(20256),r=o(890479),s=o(374114),d=o(111330),c=o(355940),p=o(207145),u=o(19585),m=o(675973),v=o(956077),_=o(821806),h=o(753143),b=o(572227),f=o(341742),y=o(923924),S=o(542963),k=o(441733),P=o(966838),x=o(373950),w=o(603316),g=o(78762),Z=o(785893);let B=(0,g.Z)(()=>o.e("32560").then(o.bind(o,817631)),void 0,e=>817631,"PinSaveButtonCommon",e=>["32560"]),T=(0,t.lazy)(async()=>({default:(await Promise.all([o.e("86934"),o.e("24660")]).then(o.bind(o,418581))).QuickSaveButtonWithExperienceAnchor})),C=({boardCount:e=0,clientTrackingParams:n,onBoardSelectionFlyoutChange:o,onClickCallback:g,pin:C,showEnabledSaveBehavior:A,showRepinOnInitialRender:j,variant:I,viewParameter:D,viewType:Q,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:R})=>{(0,t.useEffect)(()=>{(0,a.Z)("SaveAffordance","/app/common/react/components/closeup/CloseupBody/SaveAffordance.tsx")},[]);let{experience:U}=(0,p.Ow)(1000310),{experience:F}=(0,p.Ow)(12),M=(0,b.Z)(),K=(0,i.I0)(),L=(0,u.ZP)(),O=(0,t.useRef)(!1),{pins:N,clear:z}=(0,S.Z)(),J=(0,h.M0)().getItem(d.M8)||"",W=J?J===C.id:!!N&&N.length>0&&N[N.length-1].id===C.id,{shouldSeePinBetterSave:q}=(0,k.Z)();(0,f.Z)(()=>{O.current||2!==N.length&&(1!==N.length||W)||(O.current=!0,(2===N.length&&!J&&W?[N[0]]:N).forEach(({id:e,nodeId:n})=>{(0,s.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},L).then(o=>{let{id:a,url:t,name:i}=o;K((0,P.d)({boardId:a,url:t,title:i||"",pinId:e||"",nodeId:n}))})}),W||z())});let H=()=>{(0,h.M0)().removeItem(d.M8),z(),M({action:"trigger",item:"unauth-save-button-quicksave"}),K((0,x.Z)(!0)),K((0,P.d)({boardId:"",url:"",title:"Profile",pinId:C.id,nodeId:C?.node_id})),K((0,P.X)(C))},V=()=>{(0,v.Nx)("button")};if(C?.pinner?.blocked_by_me||C?.promoted_is_removable){(0,v.Nx)("button");let{checkExperiment:e}=(0,m.Z)();if(e("ads_ace_hide_removable_save").anyEnabled)return null;(0,w.nP)("webapp.closeup.save_button.ad_only_pin.shown",{sampleRate:1,tags:{blocked_by_me:C?.pinner?.blocked_by_me,promoted_is_removable:C?.promoted_is_removable}})}let X=()=>{(0,w.nP)("webapp.closeup.save_button.ad_only_pin.clicked",{sampleRate:1,tags:{blocked_by_me:C?.pinner?.blocked_by_me,promoted_is_removable:C?.promoted_is_removable}}),g()};if(!q&&U&&502450===U.experience_id)return(0,Z.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,Z.jsx)(_.Z,{children:(0,Z.jsx)(r.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,Z.jsx)(T,{autoQuicksaveCallback:H,clientTrackingParams:n,experience:U,onClickCallback:X,onMount:V,pinKey:{type:"Legacy",data:C},saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:R,shouldAutoQuicksave:W,showEnabledSaveBehavior:A,viewParameter:D})})})});let G=!C.content_sensitivity?.is_sensitive_content&&void 0!==e||q,Y=[501041],$=F&&501041===F.experience_id&&F.display_data.has_tooltip?e=>(0,Z.jsx)(p.Qp,{anchor:e,experienceIds:Y,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0}):e=>(0,Z.jsx)(p.N,{anchors:{3010:e},idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0});return G?(0,Z.jsx)(l.xu,{children:(0,Z.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,Z.jsx)(r.Z,{id:"PinBetterSave",children:(0,Z.jsx)(y.default,{autoQuicksaveCallback:H,clientTrackingParams:n,onClickCallback:X,onMount:V,onToggleFlyout:o,pinKey:{type:"Legacy",data:C},renderPinSaveTooltip:$,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:R,shouldAutoQuicksave:W,variant:I,viewParameter:D,viewType:Q})})})}):(0,Z.jsx)(c.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,Z.jsx)(_.Z,{children:(0,Z.jsx)(r.Z,{id:"PinSaveButton",children:(0,Z.jsx)(B,{clientTrackingParams:n,isCloseupPin:!0,onClickCallback:X,onMount:V,pinKey:{type:"Legacy",data:C},renderPinSaveTooltip:$,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:R,showRepinOnInitialRender:j})})})})}},373950:function(e,n,o){o.d(n,{Z:()=>a});function a(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/SaveAffordance-a17c6dcc759dfb76.mjs.map